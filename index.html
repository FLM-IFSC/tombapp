<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Patrimônio - IFSC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ifsc-green': '#008040',
                        'ifsc-green-dark': '#006633',
                        'ifsc-blue': '#007bff',
                        'ifsc-gold': '#bfa95a',
                        'ifsc-purple': '#6f42c1',
                        'ifsc-red': '#dc3545',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 max-w-2xl">
        
        <header class="mb-6 text-center">
            <h1 class="text-3xl font-bold text-ifsc-green">Controle de Patrimônio</h1>
            <p class="text-gray-600">Conferência e Ações Rápidas</p>
        </header>

        <!-- Seção de Upload Simplificada -->
        <section id="uploadSection" class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-xl font-semibold mb-4 text-center">1. Carregue seu arquivo de patrimônio</h2>
            <p class="text-gray-600 mb-6 max-w-2xl mx-auto">O arquivo CSV deve estar no formato <strong>UTF-8</strong> para garantir a leitura correta de todos os caracteres.</p>
            <div class="flex justify-center">
                <label for="csvFileInput" class="file-input-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M12 12v9"/><path d="m16 16-4-4-4 4"/></svg>
                    Carregar Arquivo CSV
                </label>
            </div>
            <input type="file" id="csvFileInput" class="hidden" accept=".csv">
            <p id="file-status" class="text-center text-gray-500 mt-4">Nenhum arquivo carregado.</p>
        </section>

        <!-- Seção de Busca e Ações Globais -->
        <main id="mainContent" class="hidden">
            <section class="bg-white p-6 rounded-lg shadow-md mb-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold">2. Busque e Exporte</h2>
                    <button id="exportButton" class="action-button-sm bg-ifsc-blue">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                        Exportar CSV
                    </button>
                </div>
                <div class="flex items-center gap-3">
                    <div class="relative flex-grow">
                        <input type="text" id="tomboInput" class="tombo-input" placeholder="Digite o nº do tombo...">
                        <svg id="searchIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                    </div>
                    <button id="loadButton" class="action-button bg-ifsc-green hover:bg-ifsc-green-dark">Carregar</button>
                </div>
            </section>

            <!-- Detalhes do Item e Ações -->
            <section id="itemDetailsSection" class="hidden bg-white p-6 rounded-lg shadow-md">
                <h2 id="itemDescription" class="text-xl font-bold text-center mb-2"></h2>
                <p id="itemTombo" class="text-sm text-gray-500 text-center mb-1"></p>
                <p id="itemResponsible" class="text-sm text-gray-500 text-center mb-4"></p>

                <div id="itemStatus" class="status-display mb-6"></div>

                <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                    <button data-action="transfer" class="action-button bg-ifsc-blue"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m16 3 4 4-4 4"/><path d="M20 7H4"/><path d="m8 21-4-4 4-4"/><path d="M4 17h16"/></svg>Transferência</button>
                    <button data-action="dispose" class="action-button bg-ifsc-gold"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 11h-4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z"/><path d="M18 11V7a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v4"/><path d="m12 16 1.5 2.5"/><path d="m10.5 18.5.5-2.5"/><path d="m14.5 18.5-.5-2.5"/></svg>Desfazimento</button>
                    <button data-action="no-tombo" class="action-button bg-ifsc-purple"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Z"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>Inválido</button>
                    <button data-action="not-found" class="action-button bg-ifsc-red"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m12 8v4"/><path d="M12 16h.01"/></svg>Não Encontrado</button>
                    <button data-action="request-label" class="action-button bg-gray-600"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.44 11.05-9.19 2.14a1 1 0 0 0-1.05.05l-8.34 6.7a1 1 0 0 0 0 1.62l9.19 7.91a1 1 0 0 0 1.05-.05l8.34-6.7a1 1 0 0 0 0-1.62Z"/><path d="m14 7-5.5 5.5"/><path d="M16.5 8.5 12 13"/></svg>Etiqueta</button>
                    <button data-action="found" class="action-button bg-ifsc-green"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>Encontrado</button>
                </div>
            </section>
        </main>
    </div>
    
    <div id="toast"></div>
    <div id="loader" class="hidden"><div class="spinner"></div></div>

    <script src="script.js" defer></script>
</body>
</html>